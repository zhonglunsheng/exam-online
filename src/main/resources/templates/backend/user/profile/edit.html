<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<meta charset="utf-8">
<head th:include="include :: header"></head>
<script>
    function update() {

        var userId = document.getElementById("userId").value;
        var name = document.getElementById("name").value;
        var phone = document.getElementById("phone").value;
        var email = document.getElementById("email").value;

        $.ajax({
            url: "/user/profile/update",
            type: "POST",
            data:{
                userId: userId,
                email: email,
                name: name,
                phone: phone
            },
            success:function(data){
                if(data.code == 0){
                    closeFrame();
                    window.location.href="/admin";
                }else{
                    layer.msg(data.msg);
                }
            },
            error:function(){
               closeFrame();
            }
        });
    }
</script>
<body class="white-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">
	<form class="form-horizontal m" id="form-user-edit">
		<input name="userId"  type="hidden" id="userId" th:value="${user.userId}" />
		<div class="form-group">
			<label class="col-sm-3 control-label ">用户名：</label>
			<div class="col-sm-8">
				<input class="form-control" type="text" id="name" name="name" th:value="${user.name}"/>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">手机：</label>
			<div class="col-sm-8">
				<input class="form-control" type="text"  id="phone" name="phone" th:value="${user.phone}">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">邮箱：</label>
			<div class="col-sm-8">
				<input class="form-control" type="email" name="email" id="email" th:value="${user.email}">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">性别：</label>
			<div class="col-sm-8">
				<div class="radio-box">
					<input type="radio" id="radio1" name="sex" value="0" checked="checked">
					<label for="radio1">男</label>
				</div>
				<div class="radio-box">
					<input type="radio" id="radio2" name="sex" value="1">
					<label for="radio2">女</label>
				</div>
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-12 col-sm-offset-3">
				<button class="btn btn-primary" onclick="update()">提交</button>
				<button class="btn btn-white" onclick="closeFrame()">取消</button>
			</div>
		</div>

	</form>
</div>
	<div th:include="include::footer"></div>
</body>
</html>
